---
title: Полностью 16-битный процесс
origin: https://wiki.panotools.org/Full_16_bit_workflow
status: process
---
Одной из самых больших проблем при создании панорам является [динамический диапазон][dynamic_range]. Чтобы сохранить
как максимальное количество уровней, так и максимальный динамический диапазон, рекомендуется использовать 16-битный
рабочий процесс. 16 бит здесь относится к разрядности одного канала. Однако в некоторых приложениях и руководствах
используется термин «48 бит» или «64 бит», который относится к полной битовой глубине для всех каналов и по существу
означает то же самое.

## Требования

Это руководство предназначено только для опытных пользователей. Предполагается, что вы знакомы со съемкой, сшиванием,
смешиванием 8-битных изображений, а также с базовыми и расширенными методами редактирования в Photoshop, такими как
использование слоев изображения, корректирующих слоев и масок.

### Источник изображения

Чтобы использовать 16-битный рабочий процесс, вам нужна камера, способная сохранять файлы [RAW][raw], или сканер плюс
приложение, позволяющие сохранять 16-битные файлы. См. [«Извлечение динамического диапазона RAW»][raw_extraction], чтобы
узнать, как извлечь полный динамический диапазон из файла RAW в один документ с 16 битами на канал.

### Программное обеспечение

Последняя версия библиотеки [`pano12`][pano12] поддерживает 16 бит, так же, как и основные [GUI-фронтенды][gui_fronts].
Если вы хотите использовать [`autopano`][autopano], вам может понадобиться инструмент для пакетного преобразования изображений
в 8-битные (например, IrfanView), поскольку в `autopano` в настоящее время есть баг, который вызывает сообщение об ошибке
для некоторых типов 16-битных [TIFF][tiff]. Некоторые камеры (например, Nikon D70) сохраняют файл [JPEG][jpeg] вместе с файлом RAW.
Вы можете использовать этот файл JPEG для использования с `autopano`. После создания контрольных точек замените JPEG
на его 16-битный вариант.

Если вы хотите отредактировать результат многослойного сшивания, вам понадобится Adobe [Photoshop][photoshop] CS или выше.
В этом нет необходимости, если вы используете [`enblend`][enblend] для смешивания изображений.

## Съемка панорамы

### Использование цифровой камеры

Чтобы получить максимальный [динамический диапазон][dynamic_range] с помощью цифровой камеры, используйте экспозицию для самых
ярких объектов, в которых вы хотите получить детали. В освещенном солнцем пейзаже это обычно облака, но также может быть и белое
здание. Цифровые камеры отсекают света, но не тени. Проверьте гистограмму, чтобы увидеть, является ли отсечение проблемой.
Хорошую статью о правильной экспозиции с цифровыми изображениями можно найти
по адресу <http://luminous-landscape.com/tutorials/expose-right.shtml>.

Съемка в формате [RAW][raw] позволяет позже создавать из этих файлов 16-битные файлы [TIFF][tiff] с точно отрегулированными
экспозицией и балансом белого или даже с другими настройками экспозиции и баланса белого, чтобы пересобрать изображения более
благоприятным образом, например, с другим балансом белого для панорамных окон.

В плагине Adobe RAW должна быть возможность найти такие настройки, чтобы извлечь хотя бы большую часть доступного
[динамического диапазона][dynamic_range]. Попробуйте найти такое значение экспозиции, которое не обрезает света сильнее, чем
обрезала камера, и установите «Тени», «Яркость» и «Контрастность» на самые низкие значения. Это, вероятно, сохранит большую
часть динамического диапазона.

Если вы не используете Windows или Mac OS или просто хотите использовать инструмент командной строки, способный извлекать
полный динамический диапазон, всегда есть [`dcraw`][dcraw].

### Использование пленки

#### Съемка

С цветной негативной пленкой используйте экспонирование для самой темной тени, в которой вы хотите получить детали.
Рекомендуется штатив, так как время экспонирования может быть очень долгим, особенно при остановке. Я использую стандартную
экспозицию 1/15s при f/16 на ярком солнечном свете с Fuji Reala. Цветная негативная пленка обрезает тени, но не света. Будет
хорошей идеей сделать дополнительное изображение, содержащее какую-нибудь цветовую диаграмму или, по крайней мере, серую карту
плюс белый лист бумаги и что-то полностью черное. Это поможет позже настроить баланс белого.

#### Сканирование

Избегайте клиппинга при сканировании. Отключите все автоматические функции в программном обеспечении для сканирования, которые
влияют на баланс белого или экспозицию. Сохраняйте как 16-битный [TIFF][tiff] (иногда называемый 48-битным [TIFF][tiff]).
Поэкспериментируйте со своим программным обеспечением для сканирования.

С Vuescan используйте расширенный рабочий процесс (см. руководство). Установите цветовой баланс на «Нет» на вкладке «Цвет».
Не беспокойтесь о том, что результат будет тусклым и с цветовым оттенком — в готовой сшитой панораме можно исправить все что угодно.
Сохранить как «48-битный [TIFF][tiff]».

## Сшивка

Если вы хотите использовать [`autopano`][autopano], рекомендуется работать с 8-битными копиями ваших изображений для создания
контрольных точек. `autopano` должен работать с 16-битными изображениями, но в настоящее время отказывается работать с некоторыми
типами. Как только вы закончите с `autopano`, вы можете вернуться к 16-битным оригиналам.

Старые версии [PTGui][ptgui] автоматически деградировали изображения до 8 бит, если вы выбирали рамку обрезки за пределами
изображения или использовали фильтр.

Самые последние версии PTGui имеют собственный поиск контрольных точек и сшиватель, оба из которых очень хорошо работают
с 16-битными изображениями. Если вы выберете сшиватель PTGui, вы можете установить битовую глубину 8 или 16 бит для выходных
форматов, которые его поддерживают.

## Смешивание

По сути, есть три[^three] возможных способа смешивания изображений:

- Позвольте panotools делать все, что угодно, выбрав любой формат вывода изображения, такой как [TIFF][tiff], [JPEG][jpeg] или [PSD][psd].
- Вывод нескольких файлов [TIFF][tiff] и их смешивание вручную в графическом редакторе с использованием слоев.
  16-битные слои в настоящее время обрабатываются Adobe [Photoshop][photoshop], [krita][krita] или [GIMP][gimp].
- Использование [`enblend`][enblend]
- Использование [SmartBlend][smartblend]
- Использование внутреннего блендера [PTGui][ptgui] (только последние версии).


TODO: ...


[^three]: В оригинале так и написано: «there are three possible ways...» — *прим. перев.*

[dynamic_range]: {% link tr/glossary/dynamic_range.md %}
[raw]: {% link tr/glossary/raw.md %}
[raw_extraction]: {% link tr/tutorial/raw_dynamic_range_extraction.md %}
[pano12]: {% link tr/panotools/pano12.md %}
[gui_fronts]: {% link tr/panotools/gui_frontends.md %}
[autopano]: {% link tr/tools/autopano.md %}
[tiff]: {% link tr/glossary/tiff.md %}
[jpeg]: {% link tr/glossary/jpeg.md %}
[photoshop]: {% link tr/glossary/photoshop.md %}
[enblend]: {% link tr/tools/enblend.md %}
[dcraw]: {% link tr/tools/dcraw.md %}
[ptgui]: {% link tr/panotools/ptgui.md %}
[psd]: {% link tr/glossary/psd.md %}
[krita]: {% link tr/glossary/krita.md %}
[gimp]: {% link tr/glossary/gimp.md %}
[smartblend]: {% link tr/panotools/smartblend.md %}
